{% extends "base.html.twig" %}
{% from 'macros/misc.html.twig' import pagination %}
{% from 'macros/users.html.twig' import avatar %}
{% from 'macros/images.html.twig' import image %}
{% import 'macros/buttons.html.twig' as button %}
{% from 'macros/topics.html.twig' import getPath %}
{% from 'macros/sorting.html.twig' import sorting %}
{% from 'macros/items.html.twig' import blockquoteOne %}

{% block headline %}
    {% if taxon is defined %}
        {{ taxon }}
    {% else %}
        Forum
    {% endif %}
{% endblock %}

{% block breadcrumb_content %}
    {{ parent() }}
    {% if taxon is defined %}
        {% include 'frontend/topic/_breadcrumb.html.twig' %}
    {% endif %}
{% endblock %}

{% block body -%}
    <div class="col-md-8">

        {% if taxon is defined and taxon.description %}
            <p class="well">{{ taxon.description|raw }}</p>
        {% endif %}

        <div class="pull-right sorting">
            {% set sorting = app.request.get('sorting') %}

            {% set icon = false %}
            {% set currentOrder = null %}

            {% if null == sorting %}
                {% set icon = true %}
                {% set currentOrder = 'desc' %}
            {% endif %}

            {% set routeName =  app.request.get('_route') %}
            {% set routeParams =  app.request.get('_route_params') %}

            Trier
            par {{ sorting(routeName, 'sylius.ui.last_update'|trans, 'lastPostCreatedAt', 'desc', icon, currentOrder, routeParams) }}
            ,
            par {{ sorting(routeName, 'sylius.ui.creation_date'|trans, 'createdAt', 'desc', null, null, routeParams) }},
            {{ sorting(routeName, 'label.most_commented'|trans, 'postCount', 'desc', null, null, routeParams) }}
        </div>

        <div class="clearfix"></div>

        {% include 'frontend/topic/_index.html.twig' %}


        {% block Pagination %}
            {{ pagination(topics) }}
        {% endblock %}
    </div>
    <div class="col-md-4">
        {% include 'frontend/topic/_sidebar.html.twig' %}
    </div>
{% endblock %}