sylius_api_product_review_rating_create:
    path: /products/{productId}/ratings/
    methods: [POST]
    defaults:
        _controller: sylius.controller.product_review:createAction
        _sylius:
            form: sylius_product_review_rating
            factory:
                method: createForSubject
                arguments: [$productId]

sylius_api_product_review_rating_update:
    path: /products/{productId}/ratings/
    methods: [PUT, PATCH]
    defaults:
        _controller: sylius.controller.product_review:updateAction
        _sylius:
            form: sylius_product_review_rating
            repository:
                method: findOneBy
                arguments: [{reviewSubject: $productId, author: expr:service('app.context.customer').getCustomer()}]